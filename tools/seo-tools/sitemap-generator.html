<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XML Sitemap Generator - Multi-Tools Hub</title>
    <meta name="description" content="Generate XML sitemaps for your website for better SEO. Create sitemaps with priority, frequency, and last modified dates.">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../../assets/css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Header will be loaded dynamically -->
    <div id="header"></div>

    <div class="tool-page">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="tool-content">
                        <div class="tool-header">
                            <h1><i class="fas fa-sitemap me-3"></i>XML Sitemap Generator</h1>
                            <p>Generate XML sitemaps for your website to improve search engine indexing</p>
                        </div>

                        <!-- Ad Section -->
                        <div class="ad-banner text-center mb-4">
                            <div class="ad-placeholder bg-light border rounded p-3">
                                <p class="text-muted mb-0">Advertisement Space</p>
                                <small class="text-muted">Google AdSense or other ads will be placed here</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <h5>Website Information</h5>
                                <div class="form-group mb-3">
                                    <label for="websiteUrl" class="form-label">Website URL *</label>
                                    <input type="url" class="form-control" id="websiteUrl" placeholder="https://example.com">
                                    <div class="form-text">Enter your website's base URL</div>
                                </div>

                                <div class="form-group mb-3">
                                    <label for="pages" class="form-label">Pages to Include *</label>
                                    <textarea class="form-control" id="pages" rows="8" placeholder="Enter one URL per line:
/about
/contact
/products
/blog
/services"></textarea>
                                    <div class="form-text">Enter one URL per line (relative or absolute URLs)</div>
                                </div>

                                <h5 class="mt-4">Default Settings</h5>
                                <div class="form-group mb-3">
                                    <label for="defaultPriority" class="form-label">Default Priority (0.0 - 1.0)</label>
                                    <input type="number" class="form-control" id="defaultPriority" min="0" max="1" step="0.1" value="0.5">
                                </div>

                                <div class="form-group mb-3">
                                    <label for="defaultChangeFreq" class="form-label">Default Change Frequency</label>
                                    <select class="form-select" id="defaultChangeFreq">
                                        <option value="always">Always</option>
                                        <option value="hourly">Hourly</option>
                                        <option value="daily" selected>Daily</option>
                                        <option value="weekly">Weekly</option>
                                        <option value="monthly">Monthly</option>
                                        <option value="yearly">Yearly</option>
                                        <option value="never">Never</option>
                                    </select>
                                </div>

                                <div class="text-center">
                                    <button class="btn btn-primary btn-lg" id="generateSitemapBtn">
                                        <i class="fas fa-sitemap me-2"></i>Generate Sitemap
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="sitemap-preview border rounded p-3" id="sitemapPreview">
                                    <h6>Sitemap Preview</h6>
                                    <p class="text-muted">Enter your website information and click "Generate Sitemap" to see results</p>
                                </div>
                            </div>
                        </div>

                        <div id="result" class="result-box" style="display: none;"></div>

                        <!-- Ad Section -->
                        <div class="ad-banner text-center mt-4">
                            <div class="ad-placeholder bg-light border rounded p-3">
                                <p class="text-muted mb-0">Advertisement Space</p>
                                <small class="text-muted">Google AdSense or other ads will be placed here</small>
                            </div>
                        </div>

                        <div class="mt-5">
                            <h4>How to Use XML Sitemap Generator</h4>
                            <ol>
                                <li>Enter your website's base URL</li>
                                <li>List all the pages you want to include in the sitemap</li>
                                <li>Set default priority and change frequency</li>
                                <li>Click "Generate Sitemap" to create your XML sitemap</li>
                                <li>Download and upload the sitemap to your website</li>
                            </ol>

                            <h5 class="mt-4">Sitemap Benefits</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>SEO Benefits</h6>
                                    <ul>
                                        <li>Helps search engines discover all your pages</li>
                                        <li>Improves crawling efficiency</li>
                                        <li>Provides metadata about your pages</li>
                                        <li>Can include last modified dates</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6>Best Practices</h6>
                                    <ul>
                                        <li>Keep sitemap under 50MB and 50,000 URLs</li>
                                        <li>Use relative URLs for internal links</li>
                                        <li>Update sitemap when adding new pages</li>
                                        <li>Submit sitemap to Google Search Console</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer will be loaded dynamically -->
    <div id="footer"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../../assets/js/main.js"></script>
    
    <script>
        // Initialize the tool
        document.addEventListener('DOMContentLoaded', function() {
            initializeSitemapGenerator();
        });

        function initializeSitemapGenerator() {
            const generateSitemapBtn = document.getElementById('generateSitemapBtn');
            const websiteUrl = document.getElementById('websiteUrl');
            const pages = document.getElementById('pages');

            // Generate sitemap button
            generateSitemapBtn.addEventListener('click', generateSitemap);

            // Real-time preview
            websiteUrl.addEventListener('input', updatePreview);
            pages.addEventListener('input', updatePreview);
        }

        function updatePreview() {
            const url = document.getElementById('websiteUrl').value;
            const pages = document.getElementById('pages').value;
            const preview = document.getElementById('sitemapPreview');
            
            if (url.trim() && pages.trim()) {
                const pageCount = pages.trim().split('\n').filter(line => line.trim()).length;
                preview.innerHTML = `
                    <h6>Ready to Generate</h6>
                    <p><strong>Website:</strong> ${url}</p>
                    <p><strong>Pages:</strong> ${pageCount}</p>
                    <p class="text-muted">Click "Generate Sitemap" to create XML sitemap</p>
                `;
            } else {
                preview.innerHTML = `
                    <h6>Sitemap Preview</h6>
                    <p class="text-muted">Enter your website information and click "Generate Sitemap" to see results</p>
                `;
            }
        }

        function generateSitemap() {
            const websiteUrl = document.getElementById('websiteUrl').value.trim();
            const pages = document.getElementById('pages').value.trim();
            const defaultPriority = document.getElementById('defaultPriority').value;
            const defaultChangeFreq = document.getElementById('defaultChangeFreq').value;

            if (!websiteUrl || !pages) {
                showNotification('Please enter website URL and pages', 'error');
                return;
            }

            // Validate URL
            try {
                new URL(websiteUrl);
            } catch (e) {
                showNotification('Please enter a valid website URL', 'error');
                return;
            }

            const generateSitemapBtn = document.getElementById('generateSitemapBtn');
            const result = document.getElementById('result');
            
            generateSitemapBtn.disabled = true;
            generateSitemapBtn.innerHTML = '<span class="loading"></span> Generating...';

            setTimeout(() => {
                try {
                    // Parse pages
                    const pageList = pages.split('\n')
                        .map(line => line.trim())
                        .filter(line => line)
                        .map(line => {
                            // Convert relative URLs to absolute
                            if (line.startsWith('/')) {
                                return websiteUrl.replace(/\/$/, '') + line;
                            } else if (line.startsWith('http')) {
                                return line;
                            } else {
                                return websiteUrl.replace(/\/$/, '') + '/' + line.replace(/^\//, '');
                            }
                        });

                    // Generate XML sitemap
                    const sitemap = generateXMLSitemap(websiteUrl, pageList, defaultPriority, defaultChangeFreq);
                    displayResults(sitemap, pageList.length);

                } catch (error) {
                    showNotification('Error generating sitemap: ' + error.message, 'error');
                    result.innerHTML = '<p class="text-danger">Error: ' + error.message + '</p>';
                    result.style.display = 'block';
                }
                
                generateSitemapBtn.disabled = false;
                generateSitemapBtn.innerHTML = '<i class="fas fa-sitemap me-2"></i>Generate Sitemap';
            }, 1000);
        }

        function generateXMLSitemap(websiteUrl, pageList, defaultPriority, defaultChangeFreq) {
            const now = new Date().toISOString();
            
            let xml = '<?xml version="1.0" encoding="UTF-8"?>\n';
            xml += '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n';
            
            pageList.forEach(url => {
                xml += '  <url>\n';
                xml += `    <loc>${escapeXml(url)}</loc>\n`;
                xml += `    <lastmod>${now}</lastmod>\n`;
                xml += `    <changefreq>${defaultChangeFreq}</changefreq>\n`;
                xml += `    <priority>${defaultPriority}</priority>\n`;
                xml += '  </url>\n';
            });
            
            xml += '</urlset>';
            
            return xml;
        }

        function escapeXml(text) {
            return text.replace(/&/g, '&amp;')
                      .replace(/</g, '&lt;')
                      .replace(/>/g, '&gt;')
                      .replace(/"/g, '&quot;')
                      .replace(/'/g, '&#39;');
        }

        function displayResults(sitemap, pageCount) {
            const result = document.getElementById('result');
            
            let resultHTML = `
                <div class="text-center">
                    <h5 class="text-success mb-3">Sitemap Generated Successfully!</h5>
                    <p>Your XML sitemap has been created with ${pageCount} pages.</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Generated XML Sitemap:</label>
                        <textarea class="form-control" rows="15" readonly id="generatedSitemap">${sitemap}</textarea>
                    </div>
                    
                    <div class="d-flex gap-2 justify-content-center">
                        <button class="btn btn-primary" onclick="copyToClipboard(document.getElementById('generatedSitemap').value)">
                            <i class="fas fa-copy me-2"></i>Copy Sitemap
                        </button>
                        <button class="btn btn-success" onclick="downloadSitemap()">
                            <i class="fas fa-download me-2"></i>Download XML
                        </button>
                    </div>
                    
                    <div class="mt-4">
                        <h6>Next Steps:</h6>
                        <ol class="text-start">
                            <li>Save the XML file as "sitemap.xml"</li>
                            <li>Upload it to your website's root directory</li>
                            <li>Submit it to Google Search Console</li>
                            <li>Add it to your robots.txt file</li>
                        </ol>
                    </div>
                </div>
            `;

            result.innerHTML = resultHTML;
            result.style.display = 'block';

            // Store for download
            window.generatedSitemap = sitemap;

            showNotification('XML sitemap generated successfully!', 'success');
        }

        function downloadSitemap() {
            if (window.generatedSitemap) {
                const blob = new Blob([window.generatedSitemap], { type: 'application/xml' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'sitemap.xml';
                link.click();
                URL.revokeObjectURL(url);
            }
        }
    </script>
</body>
</html>
