<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyword Density Checker - Multi-Tools Hub</title>
    <meta name="description" content="Check keyword density in your content for better SEO. Analyze text and find the most important keywords and their frequency.">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../../assets/css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Header will be loaded dynamically -->
    <div id="header"></div>

    <div class="tool-page">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="tool-content">
                        <div class="tool-header">
                            <h1><i class="fas fa-search me-3"></i>Keyword Density Checker</h1>
                            <p>Analyze keyword density in your content for better SEO optimization</p>
                        </div>

                        <!-- Ad Section -->
                        <div class="ad-banner text-center mb-4">
                            <div class="ad-placeholder bg-light border rounded p-3">
                                <p class="text-muted mb-0">Advertisement Space</p>
                                <small class="text-muted">Google AdSense or other ads will be placed here</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="contentText" class="form-label">Content to Analyze *</label>
                                    <textarea class="form-control" id="contentText" rows="10" placeholder="Paste your content here to analyze keyword density..."></textarea>
                                    <div class="form-text">Enter the text content you want to analyze</div>
                                </div>

                                <div class="form-group mb-3">
                                    <label for="minWordLength" class="form-label">Minimum Word Length</label>
                                    <input type="number" class="form-control" id="minWordLength" min="2" max="20" value="3">
                                    <div class="form-text">Ignore words shorter than this length</div>
                                </div>

                                <div class="form-group mb-3">
                                    <label for="maxResults" class="form-label">Maximum Results</label>
                                    <input type="number" class="form-control" id="maxResults" min="10" max="100" value="50">
                                    <div class="form-text">Number of keywords to show in results</div>
                                </div>

                                <div class="form-group mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="excludeCommon" checked>
                                        <label class="form-check-label" for="excludeCommon">
                                            Exclude Common Words (the, and, or, but, etc.)
                                        </label>
                                    </div>
                                </div>

                                <div class="text-center">
                                    <button class="btn btn-primary btn-lg" id="analyzeBtn">
                                        <i class="fas fa-chart-bar me-2"></i>Analyze Keywords
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="analysis-preview border rounded p-3" id="analysisPreview">
                                    <h6>Analysis Preview</h6>
                                    <p class="text-muted">Enter content and click "Analyze Keywords" to see results</p>
                                </div>
                            </div>
                        </div>

                        <div id="result" class="result-box" style="display: none;"></div>

                        <!-- Ad Section -->
                        <div class="ad-banner text-center mt-4">
                            <div class="ad-placeholder bg-light border rounded p-3">
                                <p class="text-muted mb-0">Advertisement Space</p>
                                <small class="text-muted">Google AdSense or other ads will be placed here</small>
                            </div>
                        </div>

                        <div class="mt-5">
                            <h4>How to Use Keyword Density Checker</h4>
                            <ol>
                                <li>Paste your content into the text area</li>
                                <li>Adjust the minimum word length and maximum results settings</li>
                                <li>Choose whether to exclude common words</li>
                                <li>Click "Analyze Keywords" to see the keyword density analysis</li>
                                <li>Review the results to optimize your content</li>
                            </ol>

                            <h5 class="mt-4">Understanding Keyword Density</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>What is Keyword Density?</h6>
                                    <p>Keyword density is the percentage of times a keyword appears in your content compared to the total number of words.</p>
                                    
                                    <h6>Ideal Density</h6>
                                    <p>Generally, 1-3% density is considered optimal for most keywords.</p>
                                </div>
                                <div class="col-md-6">
                                    <h6>Why It Matters</h6>
                                    <p>Proper keyword density helps search engines understand your content's topic and relevance.</p>
                                    
                                    <h6>Best Practices</h6>
                                    <p>Focus on natural language and user experience rather than just keyword stuffing.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer will be loaded dynamically -->
    <div id="footer"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../../assets/js/main.js"></script>
    
    <script>
        // Common words to exclude
        const commonWords = new Set([
            'the', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by', 'a', 'an', 'is', 'are', 'was', 'were', 'be', 'been', 'being', 'have', 'has', 'had', 'do', 'does', 'did', 'will', 'would', 'could', 'should', 'may', 'might', 'must', 'can', 'this', 'that', 'these', 'those', 'i', 'you', 'he', 'she', 'it', 'we', 'they', 'me', 'him', 'her', 'us', 'them', 'my', 'your', 'his', 'her', 'its', 'our', 'their', 'mine', 'yours', 'hers', 'ours', 'theirs'
        ]);

        // Initialize the tool
        document.addEventListener('DOMContentLoaded', function() {
            initializeKeywordDensityChecker();
        });

        function initializeKeywordDensityChecker() {
            const analyzeBtn = document.getElementById('analyzeBtn');
            const contentText = document.getElementById('contentText');

            // Analyze button
            analyzeBtn.addEventListener('click', analyzeKeywords);

            // Real-time preview
            contentText.addEventListener('input', updatePreview);
        }

        function updatePreview() {
            const content = document.getElementById('contentText').value;
            const preview = document.getElementById('analysisPreview');
            
            if (content.trim()) {
                const wordCount = content.trim().split(/\s+/).length;
                const charCount = content.length;
                preview.innerHTML = `
                    <h6>Content Statistics</h6>
                    <p><strong>Words:</strong> ${wordCount}</p>
                    <p><strong>Characters:</strong> ${charCount}</p>
                    <p class="text-muted">Click "Analyze Keywords" for detailed analysis</p>
                `;
            } else {
                preview.innerHTML = `
                    <h6>Analysis Preview</h6>
                    <p class="text-muted">Enter content and click "Analyze Keywords" to see results</p>
                `;
            }
        }

        function analyzeKeywords() {
            const content = document.getElementById('contentText').value.trim();
            const minWordLength = parseInt(document.getElementById('minWordLength').value);
            const maxResults = parseInt(document.getElementById('maxResults').value);
            const excludeCommon = document.getElementById('excludeCommon').checked;

            if (!content) {
                showNotification('Please enter content to analyze', 'error');
                return;
            }

            const analyzeBtn = document.getElementById('analyzeBtn');
            const result = document.getElementById('result');
            
            analyzeBtn.disabled = true;
            analyzeBtn.innerHTML = '<span class="loading"></span> Analyzing...';

            setTimeout(() => {
                try {
                    // Clean and tokenize content
                    const words = content.toLowerCase()
                        .replace(/[^\w\s]/g, ' ') // Remove punctuation
                        .split(/\s+/)
                        .filter(word => word.length >= minWordLength);

                    // Count word frequencies
                    const wordCounts = {};
                    words.forEach(word => {
                        if (excludeCommon && commonWords.has(word)) return;
                        wordCounts[word] = (wordCounts[word] || 0) + 1;
                    });

                    // Calculate densities
                    const totalWords = words.length;
                    const keywordData = Object.entries(wordCounts)
                        .map(([word, count]) => ({
                            word,
                            count,
                            density: ((count / totalWords) * 100).toFixed(2)
                        }))
                        .sort((a, b) => b.count - a.count)
                        .slice(0, maxResults);

                    // Display results
                    displayResults(keywordData, totalWords, content);

                } catch (error) {
                    showNotification('Error analyzing content: ' + error.message, 'error');
                    result.innerHTML = '<p class="text-danger">Error: ' + error.message + '</p>';
                    result.style.display = 'block';
                }
                
                analyzeBtn.disabled = false;
                analyzeBtn.innerHTML = '<i class="fas fa-chart-bar me-2"></i>Analyze Keywords';
            }, 1000);
        }

        function displayResults(keywordData, totalWords, content) {
            const result = document.getElementById('result');
            
            let resultHTML = `
                <div class="text-center">
                    <h5 class="text-success mb-3">Keyword Analysis Complete!</h5>
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">Total Words</h6>
                                    <p class="card-text h4">${totalWords}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">Unique Keywords</h6>
                                    <p class="card-text h4">${keywordData.length}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">Top Keyword</h6>
                                    <p class="card-text h6">${keywordData[0]?.word || 'N/A'}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">Top Density</h6>
                                    <p class="card-text h6">${keywordData[0]?.density || '0'}%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6 class="mb-3">Keyword Density Results</h6>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Keyword</th>
                                    <th>Count</th>
                                    <th>Density</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
            `;

            keywordData.forEach((keyword, index) => {
                const density = parseFloat(keyword.density);
                let status = '';
                let statusClass = '';
                
                if (density > 3) {
                    status = 'High';
                    statusClass = 'text-danger';
                } else if (density > 1) {
                    status = 'Good';
                    statusClass = 'text-success';
                } else {
                    status = 'Low';
                    statusClass = 'text-warning';
                }

                resultHTML += `
                    <tr>
                        <td>${index + 1}</td>
                        <td><strong>${keyword.word}</strong></td>
                        <td>${keyword.count}</td>
                        <td>${keyword.density}%</td>
                        <td><span class="${statusClass}">${status}</span></td>
                    </tr>
                `;
            });

            resultHTML += `
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-3">
                        <button class="btn btn-primary" onclick="downloadResults()">
                            <i class="fas fa-download me-2"></i>Download Results
                        </button>
                        <button class="btn btn-success" onclick="copyToClipboard(document.getElementById('resultsText').value)">
                            <i class="fas fa-copy me-2"></i>Copy Results
                        </button>
                    </div>
                </div>
            `;

            // Add hidden textarea for copying
            resultHTML += `
                <textarea id="resultsText" class="d-none">${generateTextResults(keywordData, totalWords)}</textarea>
            `;

            result.innerHTML = resultHTML;
            result.style.display = 'block';

            // Store for download
            window.keywordResults = keywordData;
            window.totalWords = totalWords;

            showNotification('Keyword analysis completed successfully!', 'success');
        }

        function generateTextResults(keywordData, totalWords) {
            let text = `Keyword Density Analysis Results\n`;
            text += `================================\n\n`;
            text += `Total Words: ${totalWords}\n`;
            text += `Unique Keywords: ${keywordData.length}\n\n`;
            text += `Keyword Density Results:\n`;
            text += `------------------------\n`;
            
            keywordData.forEach((keyword, index) => {
                text += `${index + 1}. ${keyword.word} - ${keyword.count} times (${keyword.density}%)\n`;
            });
            
            return text;
        }

        function downloadResults() {
            if (window.keywordResults) {
                const text = generateTextResults(window.keywordResults, window.totalWords);
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'keyword-density-analysis.txt';
                link.click();
                URL.revokeObjectURL(url);
            }
        }
    </script>
</body>
</html>
