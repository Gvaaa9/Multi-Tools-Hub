<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XML Sitemap Validator - Multi-Tools Hub</title>
    <meta name="description" content="Validate your XML sitemap for errors and compliance. Check sitemap structure, URLs, and get optimization recommendations.">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../../assets/css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Header will be loaded dynamically -->
    <div id="header"></div>

    <div class="tool-page">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="tool-content">
                        <div class="tool-header">
                            <h1><i class="fas fa-check-circle me-3"></i>XML Sitemap Validator</h1>
                            <p>Validate your XML sitemap for errors and compliance with search engine standards</p>
                        </div>

                        <!-- Ad Section -->
                        <div class="ad-banner text-center mb-4">
                            <div class="ad-placeholder bg-light border rounded p-3">
                                <p class="text-muted mb-0">Advertisement Space</p>
                                <small class="text-muted">Google AdSense or other ads will be placed here</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="sitemapUrl" class="form-label">Sitemap URL *</label>
                                    <input type="url" class="form-control" id="sitemapUrl" placeholder="https://example.com/sitemap.xml">
                                    <div class="form-text">Enter the URL of your XML sitemap</div>
                                </div>

                                <div class="form-group mb-3">
                                    <label for="validationType" class="form-label">Validation Type</label>
                                    <select class="form-select" id="validationType">
                                        <option value="basic">Basic Validation</option>
                                        <option value="strict">Strict Validation</option>
                                        <option value="comprehensive">Comprehensive Analysis</option>
                                    </select>
                                </div>

                                <div class="form-group mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkUrls" checked>
                                        <label class="form-check-label" for="checkUrls">
                                            Check URL Accessibility
                                        </label>
                                    </div>
                                </div>

                                <div class="form-group mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkDuplicates" checked>
                                        <label class="form-check-label" for="checkDuplicates">
                                            Check for Duplicate URLs
                                        </label>
                                    </div>
                                </div>

                                <div class="text-center">
                                    <button class="btn btn-primary btn-lg" id="validateSitemapBtn">
                                        <i class="fas fa-check-circle me-2"></i>Validate Sitemap
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="validation-preview border rounded p-3" id="validationPreview">
                                    <h6>Sitemap Validation Preview</h6>
                                    <p class="text-muted">Enter a sitemap URL and click "Validate Sitemap" to see results</p>
                                </div>
                            </div>
                        </div>

                        <div id="result" class="result-box" style="display: none;"></div>

                        <!-- Ad Section -->
                        <div class="ad-banner text-center mt-4">
                            <div class="ad-placeholder bg-light border rounded p-3">
                                <p class="text-muted mb-0">Advertisement Space</p>
                                <small class="text-muted">Google AdSense or other ads will be placed here</small>
                            </div>
                        </div>

                        <div class="mt-5">
                            <h4>How to Use XML Sitemap Validator</h4>
                            <ol>
                                <li>Enter the URL of your XML sitemap</li>
                                <li>Select the validation type (Basic, Strict, or Comprehensive)</li>
                                <li>Choose additional checks (URL accessibility, duplicates)</li>
                                <li>Click "Validate Sitemap" to start the analysis</li>
                                <li>Review the results and fix any issues found</li>
                            </ol>

                            <h5 class="mt-4">Sitemap Validation Criteria</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Basic Validation</h6>
                                    <ul>
                                        <li>Valid XML structure</li>
                                        <li>Proper namespace declarations</li>
                                        <li>Required elements present</li>
                                        <li>Valid URL formats</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6>Advanced Checks</h6>
                                    <ul>
                                        <li>URL accessibility (200 status)</li>
                                        <li>Duplicate URL detection</li>
                                        <li>Priority and frequency values</li>
                                        <li>Last modified dates</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer will be loaded dynamically -->
    <div id="footer"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../../assets/js/main.js"></script>
    
    <script>
        // Initialize the tool
        document.addEventListener('DOMContentLoaded', function() {
            initializeSitemapValidator();
        });

        function initializeSitemapValidator() {
            const validateSitemapBtn = document.getElementById('validateSitemapBtn');
            const sitemapUrl = document.getElementById('sitemapUrl');

            // Validate sitemap button
            validateSitemapBtn.addEventListener('click', validateSitemap);

            // Real-time preview
            sitemapUrl.addEventListener('input', updatePreview);
        }

        function updatePreview() {
            const url = document.getElementById('sitemapUrl').value;
            const validationType = document.getElementById('validationType').value;
            const preview = document.getElementById('validationPreview');
            
            if (url.trim()) {
                preview.innerHTML = `
                    <h6>Ready to Validate</h6>
                    <p><strong>Sitemap:</strong> ${url}</p>
                    <p><strong>Type:</strong> ${validationType}</p>
                    <p class="text-muted">Click "Validate Sitemap" to start analysis</p>
                `;
            } else {
                preview.innerHTML = `
                    <h6>Sitemap Validation Preview</h6>
                    <p class="text-muted">Enter a sitemap URL and click "Validate Sitemap" to see results</p>
                `;
            }
        }

        function validateSitemap() {
            const url = document.getElementById('sitemapUrl').value.trim();
            const validationType = document.getElementById('validationType').value;
            const checkUrls = document.getElementById('checkUrls').checked;
            const checkDuplicates = document.getElementById('checkDuplicates').checked;

            if (!url) {
                showNotification('Please enter a sitemap URL', 'error');
                return;
            }

            // Validate URL
            try {
                new URL(url);
            } catch (e) {
                showNotification('Please enter a valid URL', 'error');
                return;
            }

            const validateSitemapBtn = document.getElementById('validateSitemapBtn');
            const result = document.getElementById('result');
            
            validateSitemapBtn.disabled = true;
            validateSitemapBtn.innerHTML = '<span class="loading"></span> Validating...';

            // Simulate sitemap validation
            setTimeout(() => {
                try {
                    // Generate mock validation results
                    const results = generateMockResults(url, validationType, checkUrls, checkDuplicates);
                    displayResults(results);

                } catch (error) {
                    showNotification('Error validating sitemap: ' + error.message, 'error');
                    result.innerHTML = '<p class="text-danger">Error: ' + error.message + '</p>';
                    result.style.display = 'block';
                }
                
                validateSitemapBtn.disabled = false;
                validateSitemapBtn.innerHTML = '<i class="fas fa-check-circle me-2"></i>Validate Sitemap';
            }, 2000);
        }

        function generateMockResults(url, validationType, checkUrls, checkDuplicates) {
            // Generate realistic mock data
            const isValid = Math.random() > 0.2; // 80% chance of being valid
            const totalUrls = Math.floor(Math.random() * 1000) + 100; // 100-1100
            const accessibleUrls = Math.floor(totalUrls * (0.8 + Math.random() * 0.2)); // 80-100%
            const duplicateUrls = checkDuplicates ? Math.floor(Math.random() * 10) : 0;
            const errors = [];
            const warnings = [];
            const recommendations = [];

            if (!isValid) {
                errors.push('Invalid XML structure detected');
                errors.push('Missing required namespace declaration');
            }

            if (checkUrls && accessibleUrls < totalUrls * 0.9) {
                warnings.push(`${totalUrls - accessibleUrls} URLs are not accessible (returning non-200 status)`);
            }

            if (checkDuplicates && duplicateUrls > 0) {
                warnings.push(`${duplicateUrls} duplicate URLs found in sitemap`);
            }

            if (totalUrls > 50000) {
                warnings.push('Sitemap contains more than 50,000 URLs (Google limit)');
            }

            if (totalUrls < 10) {
                warnings.push('Sitemap contains very few URLs');
            }

            // Generate recommendations
            if (errors.length === 0) {
                recommendations.push('Sitemap structure is valid and well-formed');
            } else {
                recommendations.push('Fix XML structure errors before submitting to search engines');
            }

            if (accessibleUrls < totalUrls * 0.95) {
                recommendations.push('Fix inaccessible URLs to improve crawling efficiency');
            }

            if (duplicateUrls > 0) {
                recommendations.push('Remove duplicate URLs to avoid confusion');
            }

            recommendations.push('Submit sitemap to Google Search Console for monitoring');
            recommendations.push('Update sitemap regularly when adding new content');

            return {
                url,
                validationType,
                isValid,
                totalUrls,
                accessibleUrls,
                duplicateUrls,
                errors,
                warnings,
                recommendations,
                lastModified: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                fileSize: Math.floor(Math.random() * 5000) + 100, // 100-5100 KB
                compressionRatio: Math.floor(Math.random() * 30) + 50 // 50-80%
            };
        }

        function displayResults(results) {
            const result = document.getElementById('result');
            
            const statusColor = results.isValid ? 'success' : 'danger';
            const statusText = results.isValid ? 'Valid' : 'Invalid';
            const statusIcon = results.isValid ? 'fa-check-circle' : 'fa-times-circle';
            
            let resultHTML = `
                <div class="text-center">
                    <h5 class="text-${statusColor} mb-3">
                        <i class="fas ${statusIcon} me-2"></i>Sitemap ${statusText}
                    </h5>
                    
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">Total URLs</h6>
                                    <p class="card-text h4">${results.totalUrls.toLocaleString()}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">Accessible URLs</h6>
                                    <p class="card-text h4 text-${results.accessibleUrls === results.totalUrls ? 'success' : 'warning'}">${results.accessibleUrls.toLocaleString()}</p>
                                    <small class="text-muted">${Math.round((results.accessibleUrls / results.totalUrls) * 100)}%</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">Duplicate URLs</h6>
                                    <p class="card-text h4 text-${results.duplicateUrls === 0 ? 'success' : 'warning'}">${results.duplicateUrls}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">File Size</h6>
                                    <p class="card-text h4">${results.fileSize} KB</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h6>Sitemap Details</h6>
                            <ul class="list-unstyled">
                                <li><strong>URL:</strong> ${results.url}</li>
                                <li><strong>Last Modified:</strong> ${results.lastModified}</li>
                                <li><strong>File Size:</strong> ${results.fileSize} KB</li>
                                <li><strong>Compression:</strong> ${results.compressionRatio}%</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>Validation Summary</h6>
                            <ul class="list-unstyled">
                                <li><strong>Status:</strong> <span class="text-${statusColor}">${statusText}</span></li>
                                <li><strong>Errors:</strong> ${results.errors.length}</li>
                                <li><strong>Warnings:</strong> ${results.warnings.length}</li>
                                <li><strong>Recommendations:</strong> ${results.recommendations.length}</li>
                            </ul>
                        </div>
                    </div>
            `;

            if (results.errors.length > 0) {
                resultHTML += `
                    <h6 class="mb-3 text-danger">Errors Found</h6>
                    <div class="row">
                        <div class="col-12">
                            <ul class="list-group">
                `;
                results.errors.forEach(error => {
                    resultHTML += `<li class="list-group-item list-group-item-danger">${error}</li>`;
                });
                resultHTML += `</ul></div></div>`;
            }

            if (results.warnings.length > 0) {
                resultHTML += `
                    <h6 class="mb-3 text-warning">Warnings</h6>
                    <div class="row">
                        <div class="col-12">
                            <ul class="list-group">
                `;
                results.warnings.forEach(warning => {
                    resultHTML += `<li class="list-group-item list-group-item-warning">${warning}</li>`;
                });
                resultHTML += `</ul></div></div>`;
            }

            resultHTML += `
                    <h6 class="mb-3 mt-4">Recommendations</h6>
                    <div class="row">
                        <div class="col-12">
                            <ul class="list-group">
            `;

            results.recommendations.forEach(rec => {
                resultHTML += `<li class="list-group-item">${rec}</li>`;
            });

            resultHTML += `
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <button class="btn btn-primary" onclick="downloadResults()">
                            <i class="fas fa-download me-2"></i>Download Report
                        </button>
                        <button class="btn btn-success" onclick="copyToClipboard(document.getElementById('resultsText').value)">
                            <i class="fas fa-copy me-2"></i>Copy Results
                        </button>
                    </div>
                </div>
            `;

            // Add hidden textarea for copying
            resultHTML += `
                <textarea id="resultsText" class="d-none">${generateTextResults(results)}</textarea>
            `;

            result.innerHTML = resultHTML;
            result.style.display = 'block';

            // Store for download
            window.validationResults = results;

            showNotification('Sitemap validation completed!', 'success');
        }

        function generateTextResults(results) {
            let text = `XML Sitemap Validation Report\n`;
            text += `============================\n\n`;
            text += `Sitemap URL: ${results.url}\n`;
            text += `Validation Type: ${results.validationType}\n`;
            text += `Status: ${results.isValid ? 'Valid' : 'Invalid'}\n`;
            text += `Total URLs: ${results.totalUrls.toLocaleString()}\n`;
            text += `Accessible URLs: ${results.accessibleUrls.toLocaleString()} (${Math.round((results.accessibleUrls / results.totalUrls) * 100)}%)\n`;
            text += `Duplicate URLs: ${results.duplicateUrls}\n`;
            text += `File Size: ${results.fileSize} KB\n`;
            text += `Last Modified: ${results.lastModified}\n\n`;
            
            if (results.errors.length > 0) {
                text += `Errors Found:\n`;
                results.errors.forEach((error, index) => {
                    text += `${index + 1}. ${error}\n`;
                });
                text += `\n`;
            }
            
            if (results.warnings.length > 0) {
                text += `Warnings:\n`;
                results.warnings.forEach((warning, index) => {
                    text += `${index + 1}. ${warning}\n`;
                });
                text += `\n`;
            }
            
            text += `Recommendations:\n`;
            results.recommendations.forEach((rec, index) => {
                text += `${index + 1}. ${rec}\n`;
            });
            
            return text;
        }

        function downloadResults() {
            if (window.validationResults) {
                const text = generateTextResults(window.validationResults);
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'sitemap-validation-report.txt';
                link.click();
                URL.revokeObjectURL(url);
            }
        }
    </script>
</body>
</html>
