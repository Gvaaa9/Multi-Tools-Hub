<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Speed Checker - Multi-Tools Hub</title>
    <meta name="description" content="Check your website's loading speed and performance. Analyze page speed metrics and get optimization recommendations.">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../../assets/css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Header will be loaded dynamically -->
    <div id="header"></div>

    <div class="tool-page">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="tool-content">
                        <div class="tool-header">
                            <h1><i class="fas fa-tachometer-alt me-3"></i>Page Speed Checker</h1>
                            <p>Analyze your website's loading speed and performance metrics</p>
                        </div>

                        <!-- Ad Section -->
                        <div class="ad-banner text-center mb-4">
                            <div class="ad-placeholder bg-light border rounded p-3">
                                <p class="text-muted mb-0">Advertisement Space</p>
                                <small class="text-muted">Google AdSense or other ads will be placed here</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="websiteUrl" class="form-label">Website URL *</label>
                                    <input type="url" class="form-control" id="websiteUrl" placeholder="https://example.com">
                                    <div class="form-text">Enter the URL of the website you want to test</div>
                                </div>

                                <div class="form-group mb-3">
                                    <label for="testType" class="form-label">Test Type</label>
                                    <select class="form-select" id="testType">
                                        <option value="desktop">Desktop</option>
                                        <option value="mobile">Mobile</option>
                                        <option value="both">Both Desktop & Mobile</option>
                                    </select>
                                </div>

                                <div class="form-group mb-3">
                                    <label for="location" class="form-label">Test Location</label>
                                    <select class="form-select" id="location">
                                        <option value="us">United States</option>
                                        <option value="uk">United Kingdom</option>
                                        <option value="ca">Canada</option>
                                        <option value="au">Australia</option>
                                        <option value="de">Germany</option>
                                        <option value="fr">France</option>
                                        <option value="jp">Japan</option>
                                    </select>
                                </div>

                                <div class="text-center">
                                    <button class="btn btn-primary btn-lg" id="checkSpeedBtn">
                                        <i class="fas fa-tachometer-alt me-2"></i>Check Page Speed
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="speed-preview border rounded p-3" id="speedPreview">
                                    <h6>Speed Test Preview</h6>
                                    <p class="text-muted">Enter a URL and click "Check Page Speed" to see results</p>
                                </div>
                            </div>
                        </div>

                        <div id="result" class="result-box" style="display: none;"></div>

                        <!-- Ad Section -->
                        <div class="ad-banner text-center mt-4">
                            <div class="ad-placeholder bg-light border rounded p-3">
                                <p class="text-muted mb-0">Advertisement Space</p>
                                <small class="text-muted">Google AdSense or other ads will be placed here</small>
                            </div>
                        </div>

                        <div class="mt-5">
                            <h4>How to Use Page Speed Checker</h4>
                            <ol>
                                <li>Enter the URL of the website you want to test</li>
                                <li>Select the test type (Desktop, Mobile, or Both)</li>
                                <li>Choose the test location for more accurate results</li>
                                <li>Click "Check Page Speed" to start the analysis</li>
                                <li>Review the results and optimization recommendations</li>
                            </ol>

                            <h5 class="mt-4">Page Speed Metrics Explained</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Core Web Vitals</h6>
                                    <ul>
                                        <li><strong>LCP (Largest Contentful Paint):</strong> Loading performance</li>
                                        <li><strong>FID (First Input Delay):</strong> Interactivity</li>
                                        <li><strong>CLS (Cumulative Layout Shift):</strong> Visual stability</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6>Performance Scores</h6>
                                    <ul>
                                        <li><strong>90-100:</strong> Excellent</li>
                                        <li><strong>50-89:</strong> Needs Improvement</li>
                                        <li><strong>0-49:</strong> Poor</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer will be loaded dynamically -->
    <div id="footer"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../../assets/js/main.js"></script>
    
    <script>
        // Initialize the tool
        document.addEventListener('DOMContentLoaded', function() {
            initializePageSpeedChecker();
        });

        function initializePageSpeedChecker() {
            const checkSpeedBtn = document.getElementById('checkSpeedBtn');
            const websiteUrl = document.getElementById('websiteUrl');

            // Check speed button
            checkSpeedBtn.addEventListener('click', checkPageSpeed);

            // Real-time preview
            websiteUrl.addEventListener('input', updatePreview);
        }

        function updatePreview() {
            const url = document.getElementById('websiteUrl').value;
            const preview = document.getElementById('speedPreview');
            
            if (url.trim()) {
                preview.innerHTML = `
                    <h6>Ready to Test</h6>
                    <p><strong>URL:</strong> ${url}</p>
                    <p class="text-muted">Click "Check Page Speed" to start analysis</p>
                `;
            } else {
                preview.innerHTML = `
                    <h6>Speed Test Preview</h6>
                    <p class="text-muted">Enter a URL and click "Check Page Speed" to see results</p>
                `;
            }
        }

        function checkPageSpeed() {
            const url = document.getElementById('websiteUrl').value.trim();
            const testType = document.getElementById('testType').value;
            const location = document.getElementById('location').value;

            if (!url) {
                showNotification('Please enter a website URL', 'error');
                return;
            }

            // Validate URL
            try {
                new URL(url);
            } catch (e) {
                showNotification('Please enter a valid URL', 'error');
                return;
            }

            const checkSpeedBtn = document.getElementById('checkSpeedBtn');
            const result = document.getElementById('result');
            
            checkSpeedBtn.disabled = true;
            checkSpeedBtn.innerHTML = '<span class="loading"></span> Analyzing...';

            // Simulate page speed analysis
            setTimeout(() => {
                try {
                    // Generate mock speed test results
                    const results = generateMockResults(url, testType, location);
                    displayResults(results);

                } catch (error) {
                    showNotification('Error checking page speed: ' + error.message, 'error');
                    result.innerHTML = '<p class="text-danger">Error: ' + error.message + '</p>';
                    result.style.display = 'block';
                }
                
                checkSpeedBtn.disabled = false;
                checkSpeedBtn.innerHTML = '<i class="fas fa-tachometer-alt me-2"></i>Check Page Speed';
            }, 3000);
        }

        function generateMockResults(url, testType, location) {
            // Generate realistic mock data
            const performanceScore = Math.floor(Math.random() * 40) + 60; // 60-100
            const lcp = (Math.random() * 2 + 1).toFixed(2); // 1-3 seconds
            const fid = (Math.random() * 100 + 10).toFixed(0); // 10-110ms
            const cls = (Math.random() * 0.2).toFixed(3); // 0-0.2
            const fcp = (Math.random() * 1.5 + 0.5).toFixed(2); // 0.5-2 seconds
            const ttfb = (Math.random() * 500 + 100).toFixed(0); // 100-600ms

            return {
                url,
                testType,
                location,
                performanceScore,
                coreWebVitals: {
                    lcp: parseFloat(lcp),
                    fid: parseInt(fid),
                    cls: parseFloat(cls)
                },
                otherMetrics: {
                    fcp: parseFloat(fcp),
                    ttfb: parseInt(ttfb)
                },
                recommendations: generateRecommendations(performanceScore, lcp, fid, cls)
            };
        }

        function generateRecommendations(score, lcp, fid, cls) {
            const recommendations = [];
            
            if (score < 90) {
                recommendations.push("Optimize images and use modern formats like WebP");
                recommendations.push("Enable compression (Gzip/Brotli)");
                recommendations.push("Minify CSS, JavaScript, and HTML");
            }
            
            if (parseFloat(lcp) > 2.5) {
                recommendations.push("Optimize Largest Contentful Paint element");
                recommendations.push("Use a Content Delivery Network (CDN)");
            }
            
            if (parseInt(fid) > 100) {
                recommendations.push("Reduce JavaScript execution time");
                recommendations.push("Remove unused JavaScript");
            }
            
            if (parseFloat(cls) > 0.1) {
                recommendations.push("Avoid layout shifts by setting image dimensions");
                recommendations.push("Reserve space for dynamic content");
            }
            
            return recommendations;
        }

        function displayResults(results) {
            const result = document.getElementById('result');
            
            const scoreColor = results.performanceScore >= 90 ? 'success' : 
                              results.performanceScore >= 50 ? 'warning' : 'danger';
            
            let resultHTML = `
                <div class="text-center">
                    <h5 class="text-success mb-3">Page Speed Analysis Complete!</h5>
                    
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">Performance Score</h6>
                                    <p class="card-text h2 text-${scoreColor}">${results.performanceScore}</p>
                                    <small class="text-muted">/ 100</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">LCP</h6>
                                    <p class="card-text h4">${results.coreWebVitals.lcp}s</p>
                                    <small class="text-muted">Loading</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">FID</h6>
                                    <p class="card-text h4">${results.coreWebVitals.fid}ms</p>
                                    <small class="text-muted">Interactivity</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h6 class="card-title">CLS</h6>
                                    <p class="card-text h4">${results.coreWebVitals.cls}</p>
                                    <small class="text-muted">Stability</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h6>Additional Metrics</h6>
                            <ul class="list-unstyled">
                                <li><strong>First Contentful Paint:</strong> ${results.otherMetrics.fcp}s</li>
                                <li><strong>Time to First Byte:</strong> ${results.otherMetrics.ttfb}ms</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>Test Details</h6>
                            <ul class="list-unstyled">
                                <li><strong>URL:</strong> ${results.url}</li>
                                <li><strong>Test Type:</strong> ${results.testType}</li>
                                <li><strong>Location:</strong> ${results.location}</li>
                            </ul>
                        </div>
                    </div>

                    <h6 class="mb-3">Optimization Recommendations</h6>
                    <div class="row">
                        <div class="col-12">
                            <ul class="list-group">
            `;

            results.recommendations.forEach(rec => {
                resultHTML += `<li class="list-group-item">${rec}</li>`;
            });

            resultHTML += `
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <button class="btn btn-primary" onclick="downloadResults()">
                            <i class="fas fa-download me-2"></i>Download Report
                        </button>
                        <button class="btn btn-success" onclick="copyToClipboard(document.getElementById('resultsText').value)">
                            <i class="fas fa-copy me-2"></i>Copy Results
                        </button>
                    </div>
                </div>
            `;

            // Add hidden textarea for copying
            resultHTML += `
                <textarea id="resultsText" class="d-none">${generateTextResults(results)}</textarea>
            `;

            result.innerHTML = resultHTML;
            result.style.display = 'block';

            // Store for download
            window.speedResults = results;

            showNotification('Page speed analysis completed!', 'success');
        }

        function generateTextResults(results) {
            let text = `Page Speed Analysis Report\n`;
            text += `========================\n\n`;
            text += `URL: ${results.url}\n`;
            text += `Test Type: ${results.testType}\n`;
            text += `Location: ${results.location}\n\n`;
            text += `Performance Score: ${results.performanceScore}/100\n\n`;
            text += `Core Web Vitals:\n`;
            text += `- LCP (Largest Contentful Paint): ${results.coreWebVitals.lcp}s\n`;
            text += `- FID (First Input Delay): ${results.coreWebVitals.fid}ms\n`;
            text += `- CLS (Cumulative Layout Shift): ${results.coreWebVitals.cls}\n\n`;
            text += `Additional Metrics:\n`;
            text += `- First Contentful Paint: ${results.otherMetrics.fcp}s\n`;
            text += `- Time to First Byte: ${results.otherMetrics.ttfb}ms\n\n`;
            text += `Recommendations:\n`;
            results.recommendations.forEach((rec, index) => {
                text += `${index + 1}. ${rec}\n`;
            });
            
            return text;
        }

        function downloadResults() {
            if (window.speedResults) {
                const text = generateTextResults(window.speedResults);
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'page-speed-report.txt';
                link.click();
                URL.revokeObjectURL(url);
            }
        }
    </script>
</body>
</html>
