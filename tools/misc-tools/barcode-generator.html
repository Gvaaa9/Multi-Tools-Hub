<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Barcode Generator - Multi-Tools Hub</title>
  <meta name="description" content="Generate simple Code39 barcodes. Download as PNG." />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="../../assets/css/style.css" rel="stylesheet" />
  <style>.barcode-wrap{overflow:auto;border:1px solid #e9ecef;border-radius:.5rem;background:#fff;padding:1rem}</style>
</head>
<body>
  <div id="header"></div>
  <div class="tool-page">
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-lg-9">
          <div class="tool-content">
            <div class="tool-header">
              <h1 class="mb-1">Barcode Generator</h1>
              <p class="text-muted">Code39 barcode. Type, generate, and download.</p>
            </div>

            <div class="row g-3 mb-3 align-items-end">
              <div class="col-md-7">
                <label for="barcodeText" class="form-label">Text (A-Z 0-9 - . space $ / + %)</label>
                <input id="barcodeText" type="text" class="form-control" placeholder="HELLO-123" />
              </div>
              <div class="col-md-2">
                <label for="barWidth" class="form-label">Bar width</label>
                <input id="barWidth" type="number" class="form-control" value="2" min="1" max="6" />
              </div>
              <div class="col-md-3 d-flex gap-2">
                <button id="genBtn" class="btn btn-primary w-100" type="button">Generate</button>
                <button id="dlBtn" class="btn btn-outline-secondary w-100" type="button">Download</button>
              </div>
            </div>

            <div class="barcode-wrap mb-3 text-center">
              <canvas id="barcodeCanvas" width="800" height="200"></canvas>
            </div>

            <div class="ad-banner text-center mt-3">
              <div class="ad-placeholder bg-light border rounded p-3"><p class="text-muted mb-0">Advertisement Space</p></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="footer"></div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../../assets/js/main.js"></script>
  <script>
    // Minimal Code39 patterns (narrow:1, wide:3). Encoding excludes checksum.
    const CODE39 = {
      '0':'nnnwwnwnn','1':'wnnwnnnnw','2':'nnwwnnnnw','3':'wnwwnnnnn','4':'nnnwwnnnw','5':'wnnwwnnnn','6':'nnwwwnnnn','7':'nnnwnnwnw','8':'wnnwnnwnn','9':'nnwwnnwnn',
      'A':'wnnnnwnnw','B':'nnwnnwnnw','C':'wnwnnwnnn','D':'nnnnwwnnw','E':'wnnnwwnnn','F':'nnwnwwnnn','G':'nnnnnwwnw','H':'wnnnnwwnn','I':'nnwnnwwnn','J':'nnnnwwwnn',
      'K':'wnnnnnnww','L':'nnwnnnnww','M':'wnwnnnnwn','N':'nnnnwnnww','O':'wnnnwnnwn','P':'nnwnwnnwn','Q':'nnnnnnwww','R':'wnnnnnwwn','S':'nnwnnnwwn','T':'nnnnwnwwn',
      'U':'wwnnnnnnw','V':'nwwnnnnnw','W':'wwwnnnnnn','X':'nwnnwnnnw','Y':'wwnnwnnnn','Z':'nwwnwnnnn','-':'nwnnnnwnw','.' :'wwnnnnwnn',' ':'nwwnnnwnn','$':'nwnwnwnnn','/':'nwnwnnnwn','+':'nwnnnwnwn','%':'nnnwnwnwn','*':'nwnnwnwnn'
    };
    function toCode39(text){
      const t = ('*' + text.toUpperCase() + '*').split('');
      for(const ch of t){ if(!CODE39[ch]) throw new Error('Unsupported char: '+ch); }
      return t.map(ch=>CODE39[ch]).join('n');
    }
    function draw(){
      const c = document.getElementById('barcodeCanvas');
      const ctx = c.getContext('2d');
      const w = parseInt(document.getElementById('barWidth').value)||2;
      const txt = document.getElementById('barcodeText').value.trim();
      ctx.clearRect(0,0,c.width,c.height);
      if(!txt){ return; }
      let x = 20, y = 20, h = 120; ctx.fillStyle = '#000';
      let pattern;
      try{ pattern = toCode39(txt);}catch(e){ alert(e.message); return; }
      for(const ch of pattern){
        const bw = ch==='w' ? 3*w : w; // wide vs narrow
        // odd segments are bars, even are spaces (start with bar)
        if(((x-20)/(w)) % 2 === 0) ctx.fillRect(x,y,bw,h);
        x += bw;
      }
      // text
      ctx.font = '16px Arial'; ctx.textAlign='center'; ctx.fillText(txt.toUpperCase(), (x+20)/2, y+h+24);
    }
    document.getElementById('genBtn').addEventListener('click', draw);
    document.getElementById('dlBtn').addEventListener('click', ()=>{
      const c = document.getElementById('barcodeCanvas');
      const a = document.createElement('a'); a.href = c.toDataURL('image/png'); a.download = 'barcode.png'; a.click();
    });
    draw();
  </script>
</body>
</html>


