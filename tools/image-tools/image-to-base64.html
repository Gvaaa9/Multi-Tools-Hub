<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convert Image to Base64 - Multi-Tools Hub</title>
    <meta name="description" content="Convert images to Base64 string online for free. Convert JPG, PNG, GIF, WebP images to Base64 data URLs for web use.">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../../assets/css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Header will be loaded dynamically -->
    <div id="header"></div>

    <div class="tool-page">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="tool-content">
                        <div class="tool-header">
                            <h1><i class="fas fa-code me-3"></i>Convert Image to Base64</h1>
                            <p>Convert images to Base64 string for web use and data URLs</p>
                        </div>

                        <!-- Ad Section -->
                        <div class="ad-banner text-center mb-4">
                            <div class="ad-placeholder bg-light border rounded p-3">
                                <p class="text-muted mb-0">Advertisement Space</p>
                                <small class="text-muted">Google AdSense or other ads will be placed here</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="upload-area border border-2 border-dashed rounded p-5 text-center mb-4" id="uploadArea">
                                    <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                    <h5>Upload Image</h5>
                                    <p class="text-muted">Drag and drop your image here or click to browse</p>
                                    <input type="file" id="imageInput" accept="image/*" class="d-none">
                                    <button class="btn btn-primary" onclick="document.getElementById('imageInput').click()">
                                        Choose File
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="preview-area border rounded p-3 text-center" id="previewArea" style="display: none;">
                                    <h6>Image Preview</h6>
                                    <img id="previewImage" class="img-fluid rounded mb-3" style="max-height: 200px;">
                                    <div class="image-info">
                                        <small class="text-muted" id="imageInfo"></small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center mb-4" id="convertButtonContainer" style="display: none;">
                            <button class="btn btn-success btn-lg" id="convertBtn">
                                <i class="fas fa-code me-2"></i>Convert to Base64
                            </button>
                        </div>

                        <div id="result" class="result-box" style="display: none;"></div>

                        <!-- Ad Section -->
                        <div class="ad-banner text-center mt-4">
                            <div class="ad-placeholder bg-light border rounded p-3">
                                <p class="text-muted mb-0">Advertisement Space</p>
                                <small class="text-muted">Google AdSense or other ads will be placed here</small>
                            </div>
                        </div>

                        <div class="mt-5">
                            <h4>How to Convert Image to Base64</h4>
                            <ol>
                                <li>Upload your image by clicking "Choose File" or dragging and dropping</li>
                                <li>Click "Convert to Base64" to generate the Base64 string</li>
                                <li>Copy the Base64 string or data URL for your use</li>
                            </ol>

                            <h5 class="mt-4">What is Base64?</h5>
                            <p>Base64 is a binary-to-text encoding scheme that represents binary data in an ASCII string format. It's commonly used to embed images directly in HTML, CSS, or JavaScript code.</p>

                            <h5 class="mt-4">Use Cases</h5>
                            <ul>
                                <li><strong>Data URLs:</strong> Embed images directly in HTML/CSS</li>
                                <li><strong>API Integration:</strong> Send images as text in JSON</li>
                                <li><strong>Email Templates:</strong> Include images without external files</li>
                                <li><strong>Web Development:</strong> Reduce HTTP requests</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer will be loaded dynamically -->
    <div id="footer"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../../assets/js/main.js"></script>
    
    <script>
        let selectedFile = null;

        // Initialize the tool
        document.addEventListener('DOMContentLoaded', function() {
            initializeImageToBase64();
        });

        function initializeImageToBase64() {
            const uploadArea = document.getElementById('uploadArea');
            const imageInput = document.getElementById('imageInput');
            const convertBtn = document.getElementById('convertBtn');

            // File input change
            imageInput.addEventListener('change', handleFileSelect);

            // Drag and drop
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('dragleave', handleDragLeave);
            uploadArea.addEventListener('drop', handleDrop);

            // Convert button
            convertBtn.addEventListener('click', convertToBase64);
        }

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                processFile(file);
            } else {
                showNotification('Please select a valid image file', 'error');
            }
        }

        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('border-primary');
        }

        function handleDragLeave(event) {
            event.currentTarget.classList.remove('border-primary');
        }

        function handleDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('border-primary');
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                const file = files[0];
                if (file.type.startsWith('image/')) {
                    processFile(file);
                } else {
                    showNotification('Please drop a valid image file', 'error');
                }
            }
        }

        function processFile(file) {
            selectedFile = file;
            
            const previewArea = document.getElementById('previewArea');
            const previewImage = document.getElementById('previewImage');
            const imageInfo = document.getElementById('imageInfo');
            const convertButtonContainer = document.getElementById('convertButtonContainer');

            const reader = new FileReader();
            reader.onload = function(e) {
                previewImage.src = e.target.result;
                previewArea.style.display = 'block';
                convertButtonContainer.style.display = 'block';
                
                // Show image info
                const sizeInMB = (file.size / (1024 * 1024)).toFixed(2);
                imageInfo.textContent = `${file.name} (${sizeInMB} MB)`;
            };
            reader.readAsDataURL(file);
        }

        function convertToBase64() {
            if (!selectedFile) {
                showNotification('Please select an image first', 'error');
                return;
            }

            const convertBtn = document.getElementById('convertBtn');
            const result = document.getElementById('result');
            
            convertBtn.disabled = true;
            convertBtn.innerHTML = '<span class="loading"></span> Converting...';

            setTimeout(() => {
                try {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const base64String = e.target.result;
                        const dataURL = base64String;
                        
                        // Show result
                        result.innerHTML = `
                            <div class="text-center">
                                <h5 class="text-success mb-3">Base64 Conversion Complete!</h5>
                                <div class="mb-3">
                                    <label class="form-label">Base64 String:</label>
                                    <textarea class="form-control" rows="8" readonly id="base64String">${base64String}</textarea>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Data URL (for HTML/CSS):</label>
                                    <textarea class="form-control" rows="4" readonly id="dataURL">${dataURL}</textarea>
                                </div>
                                <div class="d-flex gap-2 justify-content-center">
                                    <button class="btn btn-primary" onclick="copyToClipboard(document.getElementById('base64String').value)">
                                        <i class="fas fa-copy me-2"></i>Copy Base64
                                    </button>
                                    <button class="btn btn-success" onclick="copyToClipboard(document.getElementById('dataURL').value)">
                                        <i class="fas fa-copy me-2"></i>Copy Data URL
                                    </button>
                                    <button class="btn btn-info" onclick="downloadBase64()">
                                        <i class="fas fa-download me-2"></i>Download
                                    </button>
                                </div>
                            </div>
                        `;
                        result.style.display = 'block';
                        
                        // Store for download
                        window.currentBase64 = base64String;
                        window.currentFileName = selectedFile.name;
                        
                        showNotification('Image converted to Base64 successfully!', 'success');
                    };
                    reader.readAsDataURL(selectedFile);
                    
                } catch (error) {
                    showNotification('Error converting image: ' + error.message, 'error');
                    result.innerHTML = '<p class="text-danger">Error: ' + error.message + '</p>';
                    result.style.display = 'block';
                }
                
                convertBtn.disabled = false;
                convertBtn.innerHTML = '<i class="fas fa-code me-2"></i>Convert to Base64';
            }, 1000);
        }

        function downloadBase64() {
            if (window.currentBase64) {
                const blob = new Blob([window.currentBase64], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = window.currentFileName.replace(/\.[^/.]+$/, '') + '_base64.txt';
                link.click();
                URL.revokeObjectURL(url);
            }
        }
    </script>
</body>
</html>
